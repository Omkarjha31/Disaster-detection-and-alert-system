<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disaster Detection</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            background: url('Drought.png') no-repeat center center fixed;
            background-size: cover;
            color: #5A3E1B; /* Earthy brown for readability */
            text-align: center;
            font-family: 'Poppins', sans-serif;
        }
        .container {
            margin-top: 40px;
        }
        .btn {
            margin: 10px;
            background: rgba(165, 120, 60, 0.8); /* Sand color */
            color: white;
            border: none;
        }
        .btn:hover {
            background: rgba(140, 100, 50, 0.9);
        }
        .results {
            background: rgba(255, 255, 255, 0.85); /* More opaque white for better visibility */
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border: 2px solid #5A3E1B; /* Darker brown for better contrast */
            color: #1F1B18; /* Darker text for readability */
            font-weight: bold;
        }
        pre {
            text-align: left;
            padding: 10px;
            background: rgba(255, 255, 255, 0.9); /* More visible background */
            border-radius: 5px;
            color: #2C1D16; /* Darker brown text */
            font-size: 16px;
        }
        .navbar {
            background: rgba(80, 50, 20, 0.8) !important; /* Dark brown navbar */
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark shadow-lg">
        <div class="container">
            <a class="navbar-brand" href="index.html">ğŸŒ Disaster Detection</a>
        </div>
    </nav>

    <div class="container">
        <h1>ğŸš¨ Real-Time Disaster Detection</h1>
        <p>Click the buttons below to fetch real-time disaster updates.</p>

        <button class="btn btn-danger" onclick="fetchTweets()">ğŸ” Get Disaster Tweets</button>
        <button class="btn btn-warning" onclick="fetchNews()">ğŸ“° Get Disaster News</button>
        <button class="btn btn-info" onclick="fetchWeather()">ğŸŒ¦ Get Weather Alerts</button>
        <button class="btn btn-primary" onclick="fetchEarthquakes()">ğŸŒ Get Earthquake Data</button>
        <button class="btn btn-secondary" onclick="clearResults()">ğŸ§¹ Clear Results</button>

        <div class="results">
            <h3>ğŸ“Œ Detection Results</h3>
            <pre id="detection-results">Click a button to get real-time data...</pre>
        </div>
    </div>

    <script>
        const API_URL = "http://127.0.0.1:5000";

        function fetchTweets() {
            document.getElementById("detection-results").innerHTML += "<br>Fetching tweets...";
            fetch(`${API_URL}/get_tweets`)
                .then(response => response.json())
                .then(data => {
                    if (data.message) {
                        document.getElementById("detection-results").innerHTML += `<br>${data.message}`;
                    } else {
                        let tweetHtml = "<h3>ğŸ¦ Disaster Tweets</h3>";
                        data.forEach(tweet => {
                            tweetHtml += `
                                <p>
                                    <strong>ğŸ“¢ Tweet:</strong> ${tweet.text} <br>
                                    ğŸŒ <strong>Location:</strong> ${tweet.location.join(", ")} <br>
                                    ğŸ­ <strong>Sentiment:</strong> ${tweet.sentiment}
                                </p>
                            `;
                        });
                        document.getElementById("detection-results").innerHTML += tweetHtml;
                    }
                })
                .catch(error => console.error("Error fetching tweets:", error));
        }

        function fetchNews() {
            document.getElementById("detection-results").innerHTML += "<br>Fetching news...";
            fetch(`${API_URL}/get_news`)
                .then(response => response.json())
                .then(data => {
                    let newsHtml = "<h3>ğŸ“° Latest Disaster News</h3>";
                    data.forEach(article => {
                        newsHtml += `
                            <p>
                                <strong>${article.classification.toUpperCase()}</strong><br>
                                ğŸŒ Location: ${article.location.join(", ")}<br>
                                ğŸ”— <a href="${article.url}" target="_blank">${article.title}</a>
                            </p>
                        `;
                    });
                    document.getElementById("detection-results").innerHTML += newsHtml;
                })
                .catch(error => console.error("Error fetching news:", error));
        }

        function fetchWeather() {
            const city = prompt("Enter a city for weather alerts:", "Mumbai");
            if (!city) return;
            document.getElementById("detection-results").innerHTML += `<br>Fetching weather for ${city}...`;
            fetch(`${API_URL}/get_weather?city=${city}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById("detection-results").innerHTML += 
                        `<h3>ğŸŒ¦ Weather Report (${data.city})</h3>
                         ğŸŒ <strong>Country:</strong> ${data.country} <br>
                         â˜ï¸ <strong>Condition:</strong> ${data.weather} <br>
                         ğŸŒ¡ï¸ <strong>Temperature:</strong> ${data.temperature_C}Â°C <br>
                         ğŸ’§ <strong>Humidity:</strong> ${data.humidity}% <br>
                         ğŸ’¨ <strong>Wind Speed:</strong> ${data.wind_speed_kmh} km/h`;
                })
                .catch(error => console.error("Error fetching weather:", error));
        }

        function fetchEarthquakes() {
            document.getElementById("detection-results").innerHTML += "<br>Fetching earthquake data...";
            fetch(`${API_URL}/get_earthquakes`)
                .then(response => response.json())
                .then(data => {
                    let quakeHtml = "<h3>ğŸŒ Recent Earthquakes</h3>";
                    data.forEach(quake => {
                        quakeHtml += `
                            <p>
                                ğŸ“ <strong>Location:</strong> ${quake.location} <br>
                                ğŸŒ¡ï¸ <strong>Magnitude:</strong> ${quake.magnitude} <br>
                                ğŸ”— <a href="${quake.url}" target="_blank">More Info</a>
                            </p>
                        `;
                    });
                    document.getElementById("detection-results").innerHTML += quakeHtml;
                })
                .catch(error => console.error("Error fetching earthquake data:", error));
        }

        function clearResults() {
            document.getElementById("detection-results").innerHTML = "<h3>ğŸ“Œ Detection Results</h3>Click a button to get real-time data...";
        }
    </script>
</body>
</html>
